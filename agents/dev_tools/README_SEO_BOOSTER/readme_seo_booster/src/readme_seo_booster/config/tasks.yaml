mine_keywords_task:
  description: >
    Search Google for '{repo_name}' and extract the 20 most common
    nouns and adjectives from the top search results. Focus on
    technical, descriptive terms that could enhance SEO, if you are not CERTAIN
    about a keyword, search for it to understand what it means, for example, MCP
    is Model Context Protocol.
  expected_output: >
    A JSON list of 15-20 unique trending keywords (nouns and adjectives)
    related to the repository, sorted by frequency.
  agent: keyword_miner

refine_readme_task:
  description: >
    For repository '{repo_name}', your ONLY task is to inject 2-3 relevant keywords from the provided list
    into the EXISTING first paragraph of the README.md. 
    
    IMPORTANT RULES:
    1.USE get_file_contents to get the README.md file content from branch 'main'.
    2. DO NOT change or rewrite any other part of the README.md
    3. DO NOT modify any headings, formatting, or structure
    4. DO NOT add new content except for the 2-3 keywords
    5. DO NOT remove any existing content from the first paragraph
    6. Identify the exact first paragraph and ONLY modify that one paragraph
    7. The keywords should be added in a way that preserves the original meaning and flow
    
    For example, if the first paragraph is:
    "This project helps users search the web efficiently."
    
    And keywords are ["automation", "data", "analytics"], you might change it to:
    "This project helps users search the web efficiently using data analytics and automation."
    
    IMPORTANT: Return the COMPLETE original README.md with ONLY the first paragraph modified to include keywords.
    ALL other content must remain EXACTLY as it was.
  expected_output: >
    A JSON object containing:
    1. "updated_readme": The complete, unchanged README.md with ONLY the first paragraph 
       modified to include 2-3 keywords. All other content must be identical to the original.
    2. "used_keywords": A list of the 2-3 keywords that were integrated into the first paragraph.
  agent: seo_refiner
  context:
    - mine_keywords_task


create_pr_task:
  description: >
    For repository '{repo_name}':
    1. Create a new branch named 'seo-readme-{current_date}'
    2. Commit the updated README.md to this new branch
    3. Open a pull request with title 'SEO: add keywords to README' and label 'autogenerated-seo'
    
    Follow these exact steps using ONLY these tools:
    - Use list_branches to check existing branches
    - Use get_file_contents to get the default branch (likely 'main' or 'master')
    - Use create_branch to create a new branch from the default branch
    - Use get_file_contents to get the current README.md content
    - Use create_or_update_file or push_files to update the README on the new branch
    - Use create_pull_request to create the PR from the new branch to the default branch
    
    DO NOT use any issue or comment-related tools. Focus ONLY on branch, file, and PR operations.
  expected_output: >
    The URL of the created pull request, or a detailed error message if something went wrong.
  agent: pr_bot
  context:
    - refine_readme_task